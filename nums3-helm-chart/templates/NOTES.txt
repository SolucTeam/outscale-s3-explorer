ğŸ‰ NumS3 Console a Ã©tÃ© installÃ© avec succÃ¨s!

{{- if .Values.ingress.enabled }}
{{- range .Values.ingress.hosts }}
ğŸŒ Application accessible sur: https://{{ .host }}
{{- end }}
{{- else }}

Pour accÃ©der Ã  votre application, suivez ces Ã©tapes:

1. RÃ©cupÃ©rez l'URL du service:

{{- if contains "NodePort" .Values.service.type }}
  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "nums3-console.fullname" . }}-frontend)
  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
  echo "ğŸŒ Frontend: http://$NODE_IP:$NODE_PORT"
  echo "ğŸ”Œ Proxy API: http://$NODE_IP:30031"

{{- else if contains "LoadBalancer" .Values.service.type }}
  NOTE: Il peut prendre quelques minutes pour que le LoadBalancer soit disponible.
  
  export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ include "nums3-console.fullname" . }}-frontend --template "{{"{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}"}}")
  echo "ğŸŒ Frontend: http://$SERVICE_IP:{{ .Values.service.frontend.port }}"
  echo "ğŸ”Œ Proxy API: http://$SERVICE_IP:{{ .Values.service.proxy.port }}"

{{- else if contains "ClusterIP" .Values.service.type }}
  kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ include "nums3-console.fullname" . }}-frontend 8080:{{ .Values.service.frontend.port }} &
  kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ include "nums3-console.fullname" . }}-proxy 3001:{{ .Values.service.proxy.port }} &
  echo "ğŸŒ Frontend: http://localhost:8080"
  echo "ğŸ”Œ Proxy API: http://localhost:3001"
{{- end }}
{{- end }}

ğŸ“Š VÃ©rifier le status de vos pods:
  kubectl get pods --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "nums3-console.name" . }},app.kubernetes.io/instance={{ .Release.Name }}"

ğŸ“‹ Voir les logs:
  # Logs du frontend
  kubectl logs -f --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "nums3-console.name" . }},app.kubernetes.io/component=frontend"
  
  # Logs du proxy
  kubectl logs -f --namespace {{ .Release.Namespace }} -l "app.kubernetes.io/name={{ include "nums3-console.name" . }},app.kubernetes.io/component=proxy"

{{- if .Values.autoscaling.enabled }}

âš¡ Autoscaling activÃ©:
  - Min replicas: {{ .Values.autoscaling.minReplicas }}
  - Max replicas: {{ .Values.autoscaling.maxReplicas }}
  - Target CPU: {{ .Values.autoscaling.targetCPUUtilizationPercentage }}%
{{- end }}

{{- if .Values.persistence.enabled }}

ğŸ’¾ Persistence activÃ©e:
  - StorageClass: {{ .Values.persistence.storageClass }}
  - Size: {{ .Values.persistence.size }}
{{- end }}

ğŸ“š Documentation complÃ¨te disponible dans le README.md

âš ï¸  IMPORTANT: 
  - Les credentials Outscale sont fournis par les utilisateurs via l'interface web
  - Assurez-vous que vos pods ont accÃ¨s aux endpoints Outscale S3
  - Configurez les Network Policies si nÃ©cessaire pour la sÃ©curitÃ©

ğŸ” Pour plus d'informations:
  helm status {{ .Release.Name }} --namespace {{ .Release.Namespace }}
  helm get all {{ .Release.Name }} --namespace {{ .Release.Namespace }}

Merci d'utiliser NumS3 Console! ğŸš€
